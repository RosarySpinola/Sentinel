# Prompt 3: Project Management System

**Priority**: High
**Skill**: ui-dev

---

## Pre-Task: Read Relevant Issues

Before starting, check for documented issues:
```bash
cat docs/issues/ui/README.md
```

---

## Objective

Create a project management system where users can organize their simulations and prover runs into projects. Each project has a default network and can track multiple transactions.

---

## Current State

- Database schema has `projects` table (from Prompt 1)
- User authentication exists (from Prompt 2)
- Dashboard has no project selection
- Simulations run in isolation without project context

---

## Requirements

### 1. Create Projects API Routes (Next.js)

Create API routes in `frontend/app/api/projects/`:

**`route.ts`** (GET, POST)
- GET: List user's projects
- POST: Create new project (name, description, network)

**`[id]/route.ts`** (GET, PUT, DELETE)
- GET: Get project by ID
- PUT: Update project
- DELETE: Delete project

### 2. Create Project Service

Create `frontend/lib/services/projects-service.ts`:
- `listProjects()` - Fetch user's projects
- `getProject(id)` - Fetch single project
- `createProject(data)` - Create new project
- `updateProject(id, data)` - Update project
- `deleteProject(id)` - Delete project

### 3. Create Project Types

Create `frontend/lib/types/project.ts`:
```typescript
interface Project {
  id: string;
  name: string;
  description?: string;
  network: 'mainnet' | 'testnet' | 'devnet';
  createdAt: Date;
  updatedAt: Date;
  simulationCount?: number;
  proverRunCount?: number;
}
```

### 4. Create Projects Page

Create `frontend/app/(dashboard)/projects/page.tsx`:
- List all user projects as cards
- Show project name, description, network badge
- Show simulation/prover run counts
- "New Project" button opens dialog
- Click project goes to project detail

### 5. Create Project Components

Create in `frontend/app/(dashboard)/projects/components/`:

**`project-card.tsx`**
- Card showing project info
- Network badge (mainnet=red, testnet=blue, devnet=green)
- Stats: simulations, prover runs
- Actions: Edit, Delete

**`create-project-dialog.tsx`**
- Dialog form for new project
- Fields: name, description, network select
- Submit creates project and closes

**`edit-project-dialog.tsx`**
- Dialog form for editing project
- Pre-filled with existing values

### 6. Create Projects Hook

Create `frontend/app/(dashboard)/projects/hooks/use-projects.ts`:
- Manage projects state
- CRUD operations with optimistic updates
- Loading and error states

### 7. Add Project Selector to Dashboard Header

Modify `frontend/components/layouts/dashboard-header.tsx`:
- Add project dropdown selector
- Show current project name
- Allow switching projects
- "All Projects" option

### 8. Create Project Context

Create `frontend/lib/contexts/project-context.tsx`:
- `ProjectProvider` component
- `useProject()` hook
- Store selected project ID in localStorage
- Provide current project to children

### 9. Add Projects to Sidebar

Modify `frontend/components/layouts/dashboard-sidebar.tsx`:
- Add "Projects" link with folder icon
- Show count badge of total projects

---

## Files to Create/Modify

- `frontend/app/api/projects/route.ts` - CREATE - List/Create
- `frontend/app/api/projects/[id]/route.ts` - CREATE - CRUD
- `frontend/lib/services/projects-service.ts` - CREATE - API client
- `frontend/lib/types/project.ts` - CREATE - Types
- `frontend/app/(dashboard)/projects/page.tsx` - CREATE - Projects list
- `frontend/app/(dashboard)/projects/components/project-card.tsx` - CREATE
- `frontend/app/(dashboard)/projects/components/create-project-dialog.tsx` - CREATE
- `frontend/app/(dashboard)/projects/components/edit-project-dialog.tsx` - CREATE
- `frontend/app/(dashboard)/projects/hooks/use-projects.ts` - CREATE
- `frontend/components/layouts/dashboard-header.tsx` - MODIFY - Add selector
- `frontend/lib/contexts/project-context.tsx` - CREATE - Context
- `frontend/components/layouts/dashboard-sidebar.tsx` - MODIFY - Add link

---

## Verification

```bash
# 1. TypeScript compiles
cd frontend && npm run build

# 2. Start dev server
npm run dev

# 3. Manual testing
# - Navigate to /projects
# - Create a new project
# - See it appear in list
# - Edit the project
# - Delete the project
# - Project selector in header works
```

---

## Success Criteria

- [ ] Projects page lists all projects
- [ ] Can create new project with dialog
- [ ] Can edit existing project
- [ ] Can delete project with confirmation
- [ ] Project selector in header works
- [ ] Selected project persists across pages
- [ ] Network badges display correctly
- [ ] All files under 300 lines

---

## Dependencies

- **Requires**: Prompt 1 (Database), Prompt 2 (Auth)
- **Blocks**: Prompt 4 (History - needs project context)

---

## UI Guidelines

- Follow dark theme from existing components
- Use shadcn/ui components (Card, Dialog, Select, Button)
- Network colors: mainnet=red-500, testnet=blue-500, devnet=green-500
- Add loading skeletons while fetching

---

## Document Issues

If you encounter problems, add to `docs/issues/ui/README.md`.
